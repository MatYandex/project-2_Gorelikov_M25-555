# Primitive DB Project

Учебный проект, имитирующий работу простой базы данных на Python.  
Реализованы операции управления таблицами и данными (CRUD), обработка ошибок через декораторы, подтверждение опасных действий, логирование времени и кэширование запросов.

---

## Возможности

### Управление таблицами
- `create_table <имя_таблицы> <столбец:тип> ...` — создать таблицу  
- `list_tables` — показать список всех таблиц  
- `drop_table <имя_таблицы>` — удалить таблицу  

### CRUD-операции
- `insert into <имя_таблицы> values (<значение1>, <значение2>, ...)` — создать запись  
- `select from <имя_таблицы>` — вывести все записи  
- `select from <имя_таблицы> where <столбец> = <значение>` — выбрать записи по условию  
- `update <имя_таблицы> set <столбец> = <значение> where <столбец> = <значение>` — обновить запись  
- `delete from <имя_таблицы> where <столбец> = <значение>` — удалить запись  
- `info <имя_таблицы>` — вывести структуру и количество записей  

### Служебные команды
- `help` — справка  
- `exit` — выход  

---

## Новые возможности
- **Обработка ошибок**: все исключения перехватываются декоратором `handle_db_errors`.  
- **Подтверждение действий**: при удалении таблицы и записей программа спросит подтверждение (`[y/n]`).  
- **Логирование времени**: вставка и выборка данных показывают время выполнения.  
- **Кэширование**: повторные одинаковые запросы `select` берутся из кэша.  

---

## Установка и запуск

### 1. Клонирование репозитория
```bash
git clone https://github.com/MatYandex/project-2_Gorelikov_M25-555.git
cd project-2_Gorelikov_M25-555
```

### 2. Установка зависимостей
Убедитесь, что установлен **Poetry**. Если нет:  
```bash
pip install poetry
```

Затем выполните:
```bash
poetry install
```

### 3. Запуск проекта
Запуск осуществляется через Poetry:

```bash
poetry run project
```

После запуска вы увидите:
```
***Операции с таблицами и данными***
<command> create_table ...
...
```

Теперь можно вводить команды.

---

## Пример работы

[![asciicast](https://asciinema.org/a/IJ6xyo8FlDKgZVQ6Wmq6dP6Rg.svg)](https://asciinema.org/a/IJ6xyo8FlDKgZVQ6Wmq6dP6Rg)

---

## Структура проекта

```
project#2_<фамилия>_<группа>/
├── src/
│   ├── __init__.py
│   ├── constants.py
│   ├── decorators.py
│   └── primitive_db/
│       ├── __init__.py
│       ├── core.py
│       ├── engine.py
│       ├── main.py
│       └── utils.py
├── Makefile
├── pyproject.toml
├── README.md
└── .gitignore
```

---

## Автор

Матвей Г.  
Telegram: [@Gor_mag](https://t.me/Gor_mag)
